"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.shopifyApi = exports.Shopify = void 0;
var tslib_1 = require("tslib");
var load_rest_resources_1 = require("../rest/load-rest-resources");
var platform_1 = require("../runtime/platform");
var config_1 = require("./config");
var clients_1 = require("./clients");
var auth_1 = require("./auth");
var session_1 = require("./session");
var utils_1 = require("./utils");
var webhooks_1 = require("./webhooks");
var billing_1 = require("./billing");
var logger_1 = require("./logger");
var version_1 = require("./version");
tslib_1.__exportStar(require("./error"), exports);
tslib_1.__exportStar(require("./session/classes"), exports);
tslib_1.__exportStar(require("../rest/types"), exports);
tslib_1.__exportStar(require("./types"), exports);
tslib_1.__exportStar(require("./base-types"), exports);
tslib_1.__exportStar(require("./auth/types"), exports);
tslib_1.__exportStar(require("./clients/types"), exports);
tslib_1.__exportStar(require("./session/types"), exports);
tslib_1.__exportStar(require("./webhooks/types"), exports);
// Temporarily export the deprecated v5 types as a Shopify object (as opposed to the type above) to help folks find
// the migration guide.
exports.Shopify = {};
function shopifyApi(config) {
    var restResources = config.restResources, libConfig = tslib_1.__rest(config, ["restResources"]);
    var validatedConfig = (0, config_1.validateConfig)(libConfig);
    var shopify = {
        config: validatedConfig,
        clients: (0, clients_1.clientClasses)(validatedConfig),
        auth: (0, auth_1.shopifyAuth)(validatedConfig),
        session: (0, session_1.shopifySession)(validatedConfig),
        utils: (0, utils_1.shopifyUtils)(validatedConfig),
        webhooks: (0, webhooks_1.shopifyWebhooks)(validatedConfig),
        billing: (0, billing_1.shopifyBilling)(validatedConfig),
        logger: (0, logger_1.logger)(validatedConfig),
        rest: {},
    };
    if (restResources) {
        shopify.rest = (0, load_rest_resources_1.loadRestResources)({
            resources: restResources,
            config: validatedConfig,
            RestClient: shopify.clients.Rest,
        });
    }
    shopify.logger
        .info("version ".concat(version_1.SHOPIFY_API_LIBRARY_VERSION, ", environment ").concat((0, platform_1.abstractRuntimeString)()))
        .catch(function (err) { return console.log(err); });
    return shopify;
}
exports.shopifyApi = shopifyApi;
//# sourceMappingURL=index.js.map